{"ast":null,"code":"var _jsxFileName = \"D:\\\\React\\\\my-app\\\\src\\\\components\\\\operation-buttons\\\\side-menu.js\";\nimport React from 'react';\n\n// Normal button component\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Button = props => {\n  return /*#__PURE__*/_jsxDEV(\"input\", {\n    type: \"button\",\n    className: \"operation-button button\",\n    value: props.text,\n    onClick: props.click\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 6,\n    columnNumber: 9\n  }, this);\n};\n\n// Side menu receiving string of operations to perform (+ , - , x, ...)\n_c = Button;\nconst SideMenu = props => {\n  let operations = props.operations.split(',');\n  let buttons = operations.map((operation, index) => {\n    return /*#__PURE__*/_jsxDEV(Button, {\n      text: operation,\n      click: () => {\n        addOperation(operation);\n        updateOperationsHistoric(operation);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 16\n    }, this);\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"side-menu calculator-section\",\n    children: buttons\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 23,\n    columnNumber: 9\n  }, this);\n};\n\n// Function to add the operation simbol to the screen\n_c2 = SideMenu;\nconst addOperation = operation => {\n  let screen = document.getElementById(\"screen\");\n  // Check if operation = C ==> Delete screen and set 0\n  if (operation === \"C\") {\n    screen.innerText = \"0\";\n    sessionStorage.removeItem(\"calculate\");\n    sessionStorage.removeItem(\"operation\");\n    sessionStorage.removeItem(\"firstValue\");\n\n    // Check if operation = \"=\" ==> Calculate result\n  } else if (operation === \"=\") {\n    let total = calculate(); // Get value of operation\n    screen.innerText = total;\n    sessionStorage.setItem(\"operation\", \"finished\");\n\n    // Check if operation = \"=\" ==> Delete 1 number from screen\n  } else if (operation === \"DEL\") {\n    let valueAfterDelete = screen.innerText.substring(0, screen.innerText.length - 1);\n    screen.innerText = valueAfterDelete.length > 0 ? valueAfterDelete : \"0\";\n\n    // Prepare operation --> update session storage and update screen\n  } else {\n    sessionStorage.setItem(\"calculate\", \"yes\");\n    sessionStorage.setItem(\"operation\", operation);\n    sessionStorage.setItem(\"firstValue\", screen.innerText);\n    let total = calculate(); // Get value of operation\n    if (total !== \"\") screen.innerText = total;\n  }\n};\n\n// Calculate operation that is being typed by the user\nconst calculate = () => {\n  // Get full operation (-> last child text)\n  let fullOperation = document.getElementById(\"historic-container\").innerText.split(\"\\n\").at(-1).split(\" \");\n  // Perform operation\n  let innerOperation;\n  let validFullOperation = fullOperation.map(value => {\n    return value[0] === \"(\" ? value.substring(1, value.indexOf(\"(\")) : value;\n  });\n  let total = fullOperation.reduce((total, value) => {\n    value = value[0] === \"(\" ? value.substring(1, value.indexOf(\")\")) : value; // Remove parentheses from negative numbers\n    console.log(value);\n    if (isNaN(value)) {\n      innerOperation = value;\n      return total;\n    } else {\n      if (innerOperation === \"+\") return parseFloat(total) + parseFloat(value);\n      if (innerOperation === \"-\") return parseFloat(total) - parseFloat(value);\n      if (innerOperation === \"x\") return parseFloat(total) * parseFloat(value);\n      if (innerOperation === \"/\") return parseFloat(total) / parseFloat(value);\n      return total;\n    }\n  });\n  return total;\n};\n\n// Function to update the historic\nconst updateOperationsHistoric = operation => {\n  let historic = document.getElementById(\"historic-container\");\n  // If calculate (=) -> show result + introduce new line\n  if (operation === \"=\") {\n    historic.innerText += \" = \" + document.getElementById(\"screen\").innerText + \"\\n\";\n\n    // If delete (c) -> clean historic\n  } else if (operation === \"C\") {\n    historic.innerText = \"\";\n\n    // Check if operation = \"=\" ==> Delete 1 number from screen\n  } else if (operation === \"DEL\") {\n    deleteHistoric();\n  } else {\n    historic.innerText += \" \" + operation;\n    // If calculating with previous result\n    if (historic.hasChildNodes() && historic.lastChild.data !== undefined && historic.lastChild.data[0] === \" \") {\n      historic.lastChild.data = document.getElementById(\"screen\").innerText + \" \" + operation + \" \";\n    }\n  }\n};\n\n// Update historic when pressed on \"DEL\" key (delete value)\nconst deleteHistoric = () => {\n  let historic = document.getElementById(\"historic-container\");\n  let operation = historic.innerText.split(\"\\n\").at(-1).split(\" \");\n  let lastNumber = operation.pop();\n  let valueAfterDelete = lastNumber.length > 0 ? lastNumber.substring(0, lastNumber.length - 1) : \"\";\n  operation.push(valueAfterDelete);\n  // Get new text replacing the last operation with the value deleted\n  let newHistoricText = historic.innerText.split(\"\\n\");\n  newHistoricText.splice(-1, 1, operation.join(\" \"));\n  historic.innerText = newHistoricText.join(\"\\n\");\n  // Solve bug if number had only 1 digit --> adds space at the begining of the next number introduced (see updateHistoric() in number-keyboard.js)\n  if (valueAfterDelete === \"\") sessionStorage.setItem(\"addSpace\", \"yes\");\n};\nexport { SideMenu as default, calculate, deleteHistoric };\nvar _c, _c2;\n$RefreshReg$(_c, \"Button\");\n$RefreshReg$(_c2, \"SideMenu\");","map":{"version":3,"names":["React","Button","props","text","click","SideMenu","operations","split","buttons","map","operation","index","addOperation","updateOperationsHistoric","screen","document","getElementById","innerText","sessionStorage","removeItem","total","calculate","setItem","valueAfterDelete","substring","length","fullOperation","at","innerOperation","validFullOperation","value","indexOf","reduce","console","log","isNaN","parseFloat","historic","deleteHistoric","hasChildNodes","lastChild","data","undefined","lastNumber","pop","push","newHistoricText","splice","join","default"],"sources":["D:/React/my-app/src/components/operation-buttons/side-menu.js"],"sourcesContent":["import React from 'react';\r\n\r\n// Normal button component\r\nconst Button = (props) => {\r\n    return (\r\n        <input type=\"button\" className=\"operation-button button\" value={props.text} onClick={props.click} />\r\n    )\r\n}\r\n\r\n// Side menu receiving string of operations to perform (+ , - , x, ...)\r\nconst SideMenu = (props) => {   \r\n    let operations = props.operations.split(',');\r\n    let buttons = operations.map((operation, index) => {\r\n        return <Button text={operation} click={() => {\r\n                    addOperation(operation);            \r\n                    updateOperationsHistoric(operation);\r\n                }}\r\n                />;\r\n        \r\n    });\r\n\r\n    return (\r\n        <div className=\"side-menu calculator-section\">\r\n            {buttons}\r\n        </div>\r\n    );\r\n}\r\n\r\n// Function to add the operation simbol to the screen\r\nconst addOperation = operation => {\r\n    let screen = document.getElementById(\"screen\");\r\n    // Check if operation = C ==> Delete screen and set 0\r\n    if (operation === \"C\") { \r\n        screen.innerText = \"0\";\r\n        sessionStorage.removeItem(\"calculate\");\r\n        sessionStorage.removeItem(\"operation\");\r\n        sessionStorage.removeItem(\"firstValue\");\r\n    \r\n    // Check if operation = \"=\" ==> Calculate result\r\n    } else if (operation === \"=\") {\r\n        let total = calculate(); // Get value of operation\r\n        screen.innerText = total;\r\n        sessionStorage.setItem(\"operation\", \"finished\");\r\n    \r\n    // Check if operation = \"=\" ==> Delete 1 number from screen\r\n    } else if (operation === \"DEL\") {\r\n        let valueAfterDelete = screen.innerText.substring(0, screen.innerText.length -1);\r\n        screen.innerText = (valueAfterDelete.length>0)? valueAfterDelete: \"0\";\r\n\r\n    // Prepare operation --> update session storage and update screen\r\n    } else {\r\n        sessionStorage.setItem(\"calculate\", \"yes\");    \r\n        sessionStorage.setItem(\"operation\", operation);    \r\n        sessionStorage.setItem(\"firstValue\", screen.innerText);\r\n        let total = calculate(); // Get value of operation\r\n        if(total !== \"\") screen.innerText = total;\r\n    }    \r\n}\r\n\r\n// Calculate operation that is being typed by the user\r\nconst calculate = () => {\r\n    // Get full operation (-> last child text)\r\n    let fullOperation = document.getElementById(\"historic-container\").innerText.split(\"\\n\").at(-1).split(\" \");\r\n    // Perform operation\r\n    let innerOperation;\r\n    let validFullOperation = fullOperation.map(value => {\r\n        return (value[0] === \"(\")? value.substring(1, value.indexOf(\"(\")):value;\r\n    });\r\n    let total = fullOperation.reduce((total, value) => {\r\n        value = (value[0] === \"(\")? value.substring(1, value.indexOf(\")\")) : value; // Remove parentheses from negative numbers\r\n        console.log(value);\r\n        if (isNaN(value)) {\r\n            innerOperation = value;\r\n            return total;\r\n        } else {\r\n            if (innerOperation === \"+\") return (parseFloat(total) + parseFloat(value));\r\n            if (innerOperation === \"-\") return (parseFloat(total) - parseFloat(value));\r\n            if (innerOperation === \"x\") return (parseFloat(total) * parseFloat(value));\r\n            if (innerOperation === \"/\") return (parseFloat(total) / parseFloat(value));\r\n            return total;\r\n        }\r\n    });\r\n\r\n    return total;\r\n}\r\n\r\n// Function to update the historic\r\nconst updateOperationsHistoric = operation => {\r\n    let historic = document.getElementById(\"historic-container\");\r\n    // If calculate (=) -> show result + introduce new line\r\n    if (operation === \"=\") {\r\n        historic.innerText += \" = \" + document.getElementById(\"screen\").innerText + \"\\n\";\r\n    \r\n    // If delete (c) -> clean historic\r\n    } else if (operation === \"C\") {\r\n        historic.innerText = \"\";\r\n\r\n    // Check if operation = \"=\" ==> Delete 1 number from screen\r\n    } else if (operation === \"DEL\") {\r\n        deleteHistoric();\r\n\r\n    } else {\r\n        historic.innerText +=  \" \" + operation;\r\n        // If calculating with previous result\r\n        if (historic.hasChildNodes() && historic.lastChild.data !== undefined && historic.lastChild.data[0] === \" \") {\r\n            historic.lastChild.data = document.getElementById(\"screen\").innerText + \" \" + operation + \" \";\r\n        }\r\n    }\r\n}\r\n\r\n// Update historic when pressed on \"DEL\" key (delete value)\r\nconst deleteHistoric = () => {\r\n    let historic = document.getElementById(\"historic-container\");\r\n    let operation = historic.innerText.split(\"\\n\").at(-1).split(\" \");\r\n    let lastNumber = operation.pop();\r\n    let valueAfterDelete = (lastNumber.length>0) ? lastNumber.substring(0, lastNumber.length -1): \"\";\r\n    operation.push(valueAfterDelete);\r\n    // Get new text replacing the last operation with the value deleted\r\n    let newHistoricText = historic.innerText.split(\"\\n\");\r\n    newHistoricText.splice(-1, 1, operation.join(\" \"));\r\n    historic.innerText = newHistoricText.join(\"\\n\");\r\n    // Solve bug if number had only 1 digit --> adds space at the begining of the next number introduced (see updateHistoric() in number-keyboard.js)\r\n    if (valueAfterDelete === \"\") sessionStorage.setItem(\"addSpace\",\"yes\");\r\n}\r\n\r\nexport {SideMenu as default, calculate, deleteHistoric};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}